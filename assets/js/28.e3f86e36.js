(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{436:function(t,e,n){"use strict";n.r(e);n(72),n(32),n(28),n(209);var a=n(123),o=n(380),r={name:"eg-polygon-advanced",data:function(){return{center:{lat:1.38,lng:103.8},edited:null,paths:[],mvcPaths:null,errorMessage:null,polygonGeojson:""}},watch:{polygonPaths:n.n(o).a.throttle((function(t){var e=this;t&&(this.paths=t,this.polygonGeojson=JSON.stringify({type:"Polygon",coordinates:this.paths.map((function(t){return e.closeLoop(t.map((function(t){var e=t.lat;return[t.lng,e]})))}))},null,2))}),1e3)},computed:{polygonPaths:function(){if(!this.mvcPaths)return null;for(var t=[],e=0;e<this.mvcPaths.getLength();e++){for(var n=[],a=0;a<this.mvcPaths.getAt(e).getLength();a++){var o=this.mvcPaths.getAt(e).getAt(a);n.push({lat:o.lat(),lng:o.lng()})}t.push(n)}return t}},methods:{closeLoop:function(t){return t.concat(t.slice(0,1))},updateCenter:function(t){this.center={lat:t.geometry.location.lat(),lng:t.geometry.location.lng()}},updateEdited:function(t){this.mvcPaths=t},addPath:function(){var t=this.$refs.map.$mapObject.getBounds(),e=t.getNorthEast(),n=t.getSouthWest(),a=t.getCenter(),o=this.paths.length+1,r=Math.pow(.66,o),s=[{lng:a.lng(),lat:(1-r)*a.lat()+r*e.lat()},{lng:(1-r)*a.lng()+r*n.lng(),lat:(1-r)*a.lat()+r*n.lat()},{lng:(1-r)*a.lng()+r*e.lng(),lat:(1-r)*a.lat()+r*n.lat()}];this.paths.push(s)},removePath:function(){this.paths.splice(this.paths.length-1,1)},handleClickForDelete:function(t){t.vertex&&this.$refs.polygon.$polygonObject.getPaths().getAt(t.path).removeAt(t.vertex)},readGeojson:function(t){try{this.polygonGeojson=t.target.value;var e=JSON.parse(t.target.value);this.paths=e.coordinates.map((function(t){return t.slice(0,t.length-1).map((function(t){var e=Object(a.a)(t,2),n=e[0];return{lat:e[1],lng:n}}))})),this.errorMessage=null}catch(t){this.errorMessage=t.message}}}},s=n(9),l=Object(s.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("label",[n("strong",[t._v("Start at:")]),t._v(" "),n("gmap-autocomplete",{on:{place_changed:function(e){return t.updateCenter(e)}}})],1),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("gmap-map",{ref:"map",staticStyle:{width:"100%",height:"500px"},attrs:{center:t.center,zoom:12}},[t.paths.length>0?n("gmap-polygon",{ref:"polygon",attrs:{paths:t.paths,editable:!0},on:{paths_changed:function(e){return t.updateEdited(e)},rightclick:t.handleClickForDelete}}):t._e()],1),t._v(" "),n("div",[n("button",{on:{click:function(e){return t.addPath()}}},[t._v("Add Path")]),t._v(" "),n("button",{on:{click:function(e){return t.removePath()}}},[t._v("Remove Path")])]),t._v(" "),n("br"),t._v(" "),n("div",[t._m(0),t._v(" "),n("textarea",{staticStyle:{width:"100%",height:"100px"},attrs:{id:"geojson"},domProps:{value:t.polygonGeojson},on:{input:t.readGeojson}}),t._v(" "),t.errorMessage?n("div",[t._v(t._s(t.errorMessage))]):t._e()])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"geojson"}},[e("strong",[this._v("Paste your geojson here:")])])}],!1,null,"7780fde6",null);e.default=l.exports}}]);